/*! Tink v0.7.2 */"use strict";(function(){function elemHasClass(elem,classStr){var elemHelp=convertToElement(elem);return elemHelp&&elem.className&&-1!==elemHelp.className.indexOf(classStr)?!0:!1}function convertToElement(str){return void 0===str||null===str?null:"object"==typeof str&&1===str.nodeType&&"object"==typeof str.style&&"object"==typeof str.ownerDocument?str:"string"==typeof str?document.querySelector(str):null}var tinkApi,root=this;tinkApi="undefined"!=typeof exports?exports:{},tinkApi.VERSION="1.0.0",tinkApi.sideNavigation=function(opts){var defaults={toggleClass:"nav-left-open",toggleMenu:"html",mobileAutoClose:!0,menuStr:"aside[data-tink-nav-aside]",activeCss:"active",topNav:"nav.nav-top",openCss:"open",accordion:!1,gotoPage:!1},options=$.extend({},defaults,opts);options.menuStr=convertToElement(options.menuStr),options.gotoPage&&(options.accordion=!0);var registerClick=function(){$(".nav-aside-list li a").each(function(){$(this).on("click",function(){setActiveElemnt($(this).parent())})})},calculateHeight=function(){$(".nav-aside-list > li").each(function(){var ulHelper=$(this).find("ul");if(ulHelper.length&&($(this).addClass("can-open"),options.accordion&&($(this).find("a")[0].href="javascript:void(0);")),currentTogggleElem){var totalHeight=0;currentTogggleElem.find("a").each(function(){totalHeight+=$(this).outerHeight()})}})},currentTogggleElem=null,openAccordion=function(el){el.find("ul").slideDown("slow",function(){}),el.addClass(options.openCss),currentTogggleElem=el},closeAccordion=function(el){el.find("ul").slideUp("slow",function(){}),el.removeClass(options.openCss),currentTogggleElem=null},toggleAccordion=function(el){if(null!==currentTogggleElem&&currentTogggleElem.removeClass(options.openCss),null!==el){if(currentTogggleElem&&el[0]===currentTogggleElem[0])closeAccordion(el);else if(null!==currentTogggleElem&&closeAccordion(currentTogggleElem),openAccordion(el),options.gotoPage&&currentActiveElement&&currentActiveElement.parent().parent()[0]!==el[0]){var firstA=el.find("ul a:first");document.location.href=firstA[0].href,setActiveElemnt(el.find("ul li:first"))}}else currentTogggleElem=null},urlDomMap={};!function(){var aMap=options.menuStr.querySelectorAll("li a[href]");[].forEach.call(aMap,function(el){urlDomMap[el.href]=el})}();var currentActiveElement=null,setActiveElemnt=function(el){var activeElem;activeElem=el?el:$(urlDomMap[location.href]).parent(),activeElem&&activeElem.hasClass("can-open")?toggleAccordion(activeElem):activeElem.parent().parent().hasClass("can-open")?(null===currentTogggleElem||activeElem.parent().parent()[0]!==currentTogggleElem[0])&&toggleAccordion(activeElem.parent().parent()):currentTogggleElem&&toggleAccordion(currentTogggleElem),options.accordion&&activeElem.hasClass("can-open")||(null!==currentActiveElement&&currentActiveElement.removeClass(options.activeCss),activeElem.addClass(options.activeCss),currentActiveElement=activeElem)},openMenu=function(){var menu=convertToElement(options.toggleMenu);elemHasClass(menu,options.toggleClass)||(menu.className=menu.className+" "+options.toggleClass)},closeMenu=function(){var menu=convertToElement(options.toggleMenu);elemHasClass(menu,options.toggleClass)&&(menu.className=menu.className.replace(options.toggleClass,""))},calculateTop=function(){1===$(options.topNav).length&&(console.log($(options.topNav).outerHeight()),$(options.menuStr).css("top",$(options.topNav).outerHeight()))},watchForPadding=function(){window.addEventListener("resize",function(){calculateTop()})};return{openMenu:function(){openMenu()},closeMenu:function(){closeMenu()},toggleMenu:function(){elemHasClass(options.toggleMenu,options.toggleClass)?closeMenu():openMenu()},init:function(){calculateHeight(),setActiveElemnt(),registerClick(),watchForPadding(),calculateTop()},reloadActive:function(){setActiveElemnt()}}},root.tinkApi=tinkApi}).call(window);