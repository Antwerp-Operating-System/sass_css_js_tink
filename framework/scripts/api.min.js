/*! Tink v1.2.4 */"use strict";(function(){var tinkApi,root=this;tinkApi="undefined"!=typeof exports?exports:{},tinkApi.VERSION="1.0.1",tinkApi.util={getCurrentURL:function(){return window.location.href}},tinkApi.topNavigation=function(element){var defaults={menuStr:element},calculateHeight=function(){1===$(defaults.menuStr).length&&setTimeout(function(){var height=$(defaults.menuStr)[0].getBoundingClientRect().height;$($(document)[0].body).css("padding-top",height+"px")},100)},startLisener=function(){$(window).bind("resize",calculateHeight)};return{init:function(){calculateHeight(),startLisener()}}},tinkApi.accordion=function(){var defaults={speed:200,loadingCallback:!0,oneAtTime:!0,openGroupCss:"group-open",groupLoadingCss:"group-loading",contentCss:"accordion-panel-body",loadingCss:"accordion-spinner",startOpen:!1,accordionLoadedContent:"accordion-loaded-content",noCallBack:"no-call-back"},accordion=null,init=function(element,opts){accordion=element,opts&&Object.extend(defaults,opts)},groups=[],addGroup=function(elem){accordion&&(groups.push(elem.get(0)),elem.hasClass(defaults.noCallBack)&&(findEl(elem,defaults.loadingCss).css("opacity",0),findEl(elem,defaults.contentCss).css("height","auto")),findEl(elem,defaults.contentCss).css("display","none"))},getGroupAt=function(index){return $(groups[index])},findEl=function(elem,classStr){return elem.find("."+classStr)},openGroup=function(elem){if(accordion){var index=groups.indexOf(elem.get(0));index>=0&&(elem=getGroupAt(index),elem.hasClass(defaults.groupLoadingCss)?(findEl(elem,defaults.contentCss).slideDown(defaults.speed),elem.removeClass(defaults.groupLoadingCss),elem.addClass(defaults.openGroupCss)):elem.hasClass(defaults.openGroupCss)||(elem.hasClass(defaults.noCallBack)||elem.hasClass(defaults.groupLoadingCss)?(findEl(elem,defaults.contentCss).css("height","auto"),findEl(elem,defaults.contentCss).slideDown(defaults.speed),elem.removeClass(defaults.groupLoadingCss),elem.addClass(defaults.openGroupCss)):(findEl(elem,defaults.loadingCss).css("opacity",1),elem.addClass(defaults.groupLoadingCss))))}},closeGroup=function(elem){if(accordion){var index=groups.indexOf(elem.get(0));index>=0&&(elem=getGroupAt(index),(elem.hasClass(defaults.openGroupCss)||elem.hasClass(defaults.groupLoadingCss))&&(elem.find("."+defaults.contentCss).slideUp(defaults.speed),elem.removeClass(defaults.openGroupCss),elem.removeClass(defaults.groupLoadingCss)))}};return{init:function(element,opts){init(element,opts)},addGroup:function(element){addGroup(element)},openGroup:function(element){openGroup(element)},closeGroup:function(element){closeGroup(element)}}},tinkApi.sideNavigation=function(element){function getRotationDegrees(obj){var angle,matrix=obj.css("-webkit-transform")||obj.css("-moz-transform")||obj.css("-ms-transform")||obj.css("-o-transform")||obj.css("transform");if("none"!==matrix){var values=matrix.split("(")[1].split(")")[0].split(","),a=values[3],b=values[4];angle=Math.round(Math.atan2(b,a)*(180/Math.PI))}else angle=0;return 0>angle?angle+=360:angle}function whichTransitionEvent(){var t,el=document.createElement("fakeelement"),transitions={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in transitions)if(void 0!==el.style[t])return transitions[t]}function checkTabIndex(){var open=270===getRotationDegrees(element)?1:0;!fallback&&open?(element.find("a").attr("tabIndex","-1"),fallback=1):fallback&&!open&&(element.find("a").removeAttr("tabIndex"),fallback=0)}var options,defaults={toggleClass:"nav-left-open",toggleMenu:"html",mobileAutoClose:!0,menuStr:"aside[data-tink-nav-aside]",activeCss:"active",topNav:"nav.nav-top",subActive:"has-active-item",openCss:"open",accordion:!0,gotoPage:!0,speed:200},clickCheck=0,registerClick=function(){$(".nav-aside-section li a").each(function(){$(this).on("click",function(){setActiveElemnt($(this).parent()),clickCheck=1})})},fallback=-1,transitionEvent=whichTransitionEvent();transitionEvent&&element[0].addEventListener(transitionEvent,checkTabIndex);var calculateHeight=function(){$(".nav-aside-section ul > li").each(function(){var ulHelper=$(this).find("ul");ulHelper.length&&($(this).addClass("can-open"),options.accordion&&($(this).find("a")[0].href="javascript:void(0);"))})};$(window).bind("hashchange",function(){clickCheck||setActiveElemnt(),clickCheck=0});var currentTogggleElem=null,openAccordion=function(el){el.find("ul").slideDown(options.speed,function(){}),el.addClass(options.openCss),currentTogggleElem=el},closeAccordion=function(el){el.find("ul").slideUp(options.speed,function(){}),el.removeClass(options.openCss),currentTogggleElem=null},toggleAccordion=function(el,force){if(null!==currentTogggleElem&&currentTogggleElem.removeClass(options.openCss),null!==el){if(currentTogggleElem&&el[0]===currentTogggleElem[0])closeAccordion(el);else if(null!==currentTogggleElem&&closeAccordion(currentTogggleElem),openAccordion(el),options.gotoPage){var goto=1;if(currentActiveElement&&currentActiveElement.parent().parent()[0]===el[0]&&(goto=0),goto&&force!==!1){var firstA=el.find("ul a:first");document.location.href=firstA[0].href,setActiveElemnt(el.find("ul li:first"))}}}else currentTogggleElem=null},urlDomMap={},currentActiveElement=null,setActiveElemnt=function(el){var activeElem;activeElem=el?el:$(urlDomMap[tinkApi.util.getCurrentURL()]).parent(),activeElem&&activeElem.hasClass("can-open")?toggleAccordion(activeElem):activeElem.parent().parent().hasClass("can-open")?((null===currentTogggleElem||activeElem.parent().parent()[0]!==currentTogggleElem[0])&&toggleAccordion(activeElem.parent().parent(),!1),activeElem.parent().parent().addClass(options.subActive)):currentTogggleElem&&toggleAccordion(currentTogggleElem),options.accordion&&activeElem.hasClass("can-open")||(null!==currentActiveElement&&(currentActiveElement.parent().parent()&&currentActiveElement.parent().parent().get(0)!==activeElem.parent().parent().get(0)&&currentActiveElement.parent().parent().removeClass(options.subActive),currentActiveElement.removeClass(options.activeCss)),activeElem.addClass(options.activeCss),currentActiveElement=activeElem)},openMenu=function(){$(options.toggleMenu).addClass(options.toggleClass)},closeMenu=function(){$(options.toggleMenu).removeClass(options.toggleClass)},calculateTop=function(){1===$(options.topNav).length&&$(options.menuStr).css("top",$(options.topNav)[0].getBoundingClientRect().height)},watchForPadding=function(){window.addEventListener("resize",function(){setTimeout(calculateTop,150)})},init=function(opts){options=$.extend({},defaults,opts),options.menuStr=$(element),options.gotoPage=options.autoSelect?!0:!1,options.menuStr.hasClass("nav-right")&&(options.toggleClass="nav-right-open"),function(){var aMap=options.menuStr.find("li a[href]");[].forEach.call(aMap,function(el){urlDomMap[el.href]=el})}(),calculateHeight(),setActiveElemnt(),registerClick(),watchForPadding(),calculateTop(),checkTabIndex(),fallback=!(270===getRotationDegrees(element)?1:0)};return{openMenu:function(){openMenu()},closeMenu:function(){closeMenu()},toggleMenu:function(){$(options.toggleMenu).hasClass(options.toggleClass)?closeMenu():openMenu()},init:function(opts){init(opts)},reloadActive:function(){setActiveElemnt()}}},root.tinkApi=tinkApi}).call(window);