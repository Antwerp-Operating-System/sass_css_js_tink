/*! Tink v1.0.0-beta.2 */"use strict";(function(){var tinkApi,root=this;tinkApi="undefined"!=typeof exports?exports:{},tinkApi.VERSION="1.0.0",tinkApi.util={getCurrentURL:function(){return window.location.href}},tinkApi.topNavigation=function(element){var defaults={menuStr:element},calculateHeight=function(){if(1===$(defaults.menuStr).length){var height=$(defaults.menuStr)[0].getBoundingClientRect().height;$($(document)[0].body).css("padding-top",height+"px")}},startLisener=function(){$(window).bind("resize",calculateHeight)};return{init:function(){calculateHeight(),startLisener()}}},tinkApi.accordion=function(element){var defaults={toggle:"accordion-toggle",speed:300,oneAtTime:!0},elements=null,items=[],openIndex=null,handleAccordion=function(index){defaults.oneAtTime?openIndex===index?closeAccordion(openIndex):(null!==openIndex&&closeAccordion(openIndex),openIndex=index,openAccordion(openIndex)):items[index].open?closeAccordion(index):openAccordion(index)},init=function(){elements=$(element).find("> div.accordion > div.accordion-toggle"),elements.each(function(index){items[index]={open:!1}}),elements.click(function(){handleAccordion(elements.index(this))})},openAccordion=function(index){if($(elements[index])&&$(elements[index]).next().hasClass("accordion-content")){items[index].open=!0;var content=$(elements[index]).next();content.slideDown(defaults.speed)}},closeAccordion=function(index){if($(elements[index])&&$(elements[index]).next().hasClass("accordion-content")){var content=$(elements[index]).next();content.slideUp(defaults.speed),items[index].open=!1,openIndex=null}};return{init:function(){init()}}},tinkApi.sideNavigation=function(element){var options,defaults={toggleClass:"nav-left-open",toggleMenu:"html",mobileAutoClose:!0,menuStr:"aside[data-tink-nav-aside]",activeCss:"active",topNav:"nav.nav-top",openCss:"open",accordion:!1,gotoPage:!1,speed:200},registerClick=function(){$(".nav-aside-list li a").each(function(){$(this).on("click",function(){setActiveElemnt($(this).parent())})})},calculateHeight=function(){$(".nav-aside-list > li").each(function(){var ulHelper=$(this).find("ul");ulHelper.length&&($(this).addClass("can-open"),options.accordion&&($(this).find("a")[0].href="javascript:void(0);"))})},currentTogggleElem=null,openAccordion=function(el){el.find("ul").slideDown(options.speed,function(){}),el.addClass(options.openCss),currentTogggleElem=el},closeAccordion=function(el){el.find("ul").slideUp(options.speed,function(){}),el.removeClass(options.openCss),currentTogggleElem=null},toggleAccordion=function(el){if(null!==currentTogggleElem&&currentTogggleElem.removeClass(options.openCss),null!==el){if(currentTogggleElem&&el[0]===currentTogggleElem[0])closeAccordion(el);else if(null!==currentTogggleElem&&closeAccordion(currentTogggleElem),openAccordion(el),options.gotoPage&&currentActiveElement&&currentActiveElement.parent().parent()[0]!==el[0]){var firstA=el.find("ul a:first");document.location.href=firstA[0].href,setActiveElemnt(el.find("ul li:first"))}}else currentTogggleElem=null},urlDomMap={},currentActiveElement=null,setActiveElemnt=function(el){var activeElem;activeElem=el?el:$(urlDomMap[tinkApi.util.getCurrentURL()]).parent(),activeElem&&activeElem.hasClass("can-open")?toggleAccordion(activeElem):activeElem.parent().parent().hasClass("can-open")?(null===currentTogggleElem||activeElem.parent().parent()[0]!==currentTogggleElem[0])&&toggleAccordion(activeElem.parent().parent()):currentTogggleElem&&toggleAccordion(currentTogggleElem),options.accordion&&activeElem.hasClass("can-open")||(null!==currentActiveElement&&currentActiveElement.removeClass(options.activeCss),activeElem.addClass(options.activeCss),currentActiveElement=activeElem)},openMenu=function(){$(options.toggleMenu).toggleClass(options.toggleClass)},closeMenu=function(){$(options.toggleMenu).toggleClass(options.toggleClass)},calculateTop=function(){1===$(options.topNav).length&&$(options.menuStr).css("top",$(options.topNav)[0].getBoundingClientRect().height)},watchForPadding=function(){window.addEventListener("resize",function(){setTimeout(calculateTop,150)})},init=function(opts){options=$.extend({},defaults,opts),options.menuStr=$(element),options.gotoPage&&(options.accordion=!0),function(){var aMap=options.menuStr.find("li a[href]");[].forEach.call(aMap,function(el){urlDomMap[el.href]=el})}(),calculateHeight(),setActiveElemnt(),registerClick(),watchForPadding(),calculateTop()};return{openMenu:function(){openMenu()},closeMenu:function(){closeMenu()},toggleMenu:function(){$(options.toggleMenu).hasClass(options.toggleClass)?closeMenu():openMenu()},init:function(opts){init(opts)},reloadActive:function(){setActiveElemnt()}}},root.tinkApi=tinkApi}).call(window);