/*! Tink v1.0.0-beta.4 */"use strict";angular.module("tink.accordion",[]),angular.module("tink.accordion").directive("tinkAccordion",["tinkApi",function(tinkApi){return{restrict:"EA",controller:"TinkAccordionController",transclude:!0,replace:!1,scope:{startOpen:"=",oneAtATime:"="},template:'<div class="panel-group" ng-transclude></div>',link:function(scope,element,attrs,accordionCtrl){var options={};angular.forEach(["oneAtATime","startOpen"],function(key){angular.isDefined(attrs[key])&&(options[key]="boolean"==typeof scope[key]?scope[key]:"true"===attrs[key])});var accordionElem=tinkApi.accordion(element);accordionCtrl.init(accordionElem,element,options)}}}]).directive("tinkAccordionGroup",function(){return{require:"^tinkAccordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"templates/tinkAccordionGroup.html",scope:{heading:"@",isOpen:"=?",isDisabled:"=?",onclick:"=?",isCollapsed:"="},link:function(scope,element,attrs,accordionCtrl){var trackToggle,states={closed:1,open:2,loading:0},state=states.closed,onFunc="function"==typeof scope.onclick;onFunc||element.addClass("no-call-back"),scope.toggleOpen=function(){state===states.closed?onFunc?scope.loading():scope.open():state===states.open?scope.close():state===states.loading&&scope.cancel()},attrs.isCollapsed&&(trackToggle="true"===attrs.isCollapsed||"false"===attrs.isCollapsed?!1:!0),trackToggle&&scope.$watch("isCollapsed",function(newVar){newVar===!0?stateClose():newVar===!1&&stateOpen()}),scope.open=function(){trackToggle?scope.isCollapsed=!1:stateOpen()},scope.close=function(){trackToggle?scope.isCollapsed=!0:stateClose()},scope.loading=function(){trackToggle?scope.isCollapsed=!1:stateLoad()},scope.cancel=function(){trackToggle?scope.isCollapsed=!0:cancelTrans()};var stateLoad=function(){state=states.loading,callback("loading",function(){state===states.loading&&stateOpen()}),accordionCtrl.openGroup(element,scope)},stateOpen=function(){!onFunc&&state===states.closed||onFunc&&state===states.loading?(state=states.open,accordionCtrl.openGroup(element,scope),callback("open")):onFunc&&state===states.closed&&stateLoad()},stateClose=function(){state===states.open?(state=states.closed,accordionCtrl.closeGroup(element),callback("closed")):state===states.canceld&&cancelTrans()},cancelTrans=function(){state=states.closed,accordionCtrl.closeGroup(element),callback("canceld")},callback=function(type,fn){onFunc&&scope.onclick(type,fn)};accordionCtrl.addGroup(scope,element)}}}).controller("TinkAccordionController",[function(){var self=this;this.groups={},this.init=function(accordion,element,opts){self.$accordion=accordion,self.$options=opts,self.$accordion.init(element)};var currentOpen;this.addGroup=function(scope,elem){self.$accordion.addGroup(elem),self.$options.startOpen&&scope.isCollapsed!==!0?scope.open():scope.isCollapsed===!1&&scope.open()},this.addLoader=function(elem){currentOpen=elem,self.$accordion.addLoader(elem)},this.openGroup=function(elem,scope){self.$options.oneAtATime&&currentOpen&&currentOpen!==scope&&currentOpen.toggleOpen(),currentOpen=scope,self.$accordion.openGroup(elem)},this.closeGroup=function(elem){self.$accordion.closeGroup(elem),currentOpen=null}}]),angular.module("tink.datepicker",[]).directive("tinkDatepicker",["$q","$templateCache","$http","$compile","dateCalculator","calView",function($q,$templateCache,$http,$compile,dateCalculator,calView){return{restrict:"EA",require:["ngModel","?^form"],replace:!0,priority:999,templateUrl:"templates/tinkDatePickerInput.html",scope:{ngModel:"="},link:function(scope,element,attr,ctrl){function bindLiseners(){copyEl.bind("mousedown",function(){return input.focus(),!1})}function haalTemplateOp(template){return fetchPromises[template]?fetchPromises[template]:fetchPromises[template]=$q.when($templateCache.get(template)||$http.get(template)).then(function(res){return angular.isObject(res)?($templateCache.put(template,res.data),res.data):res})}ctrl[1]&&ctrl[1].$removeControl(ctrl[0]),ctrl=ctrl[0],scope.opts=attr;var copyEl,content,input=element.find("input"),clickable=element.find(".input-group-addon");scope.$show=function(){copyEl=templateElem,copyEl.css({position:"absolute",display:"block"}),element.append(copyEl),bindLiseners(),$directive.pane.month=1,scope.build()},content=angular.element('<input tink-format-input data-format="00/00/0000" data-placeholder="mm/dd/jjjj" data-date name="'+attr.name+'"  ng-model="ngModel" />'),$(content).insertBefore(element.find("span.input-group-addon")),$compile(content)(scope),scope.$watch("ngModel",function(newVal){$directive.selectedDate=newVal,$directive.viewDate=newVal}),clickable.bind("mousedown touch",function(){return scope.$apply(function(){scope.$show(),content.find("#input").focus()}),!1});var options={yearTitleFormat:"mmmm yyyy",dateFormat:"dd/mm/yyyy"},$directive={viewDate:new Date,pane:{},mode:0,selectedDate:null};scope.$selectPane=function(value){$directive.viewDate=new Date(Date.UTC($directive.viewDate.getFullYear()+($directive.pane.year||0)*value,$directive.viewDate.getMonth()+($directive.pane.month||0)*value,1)),scope.build()},scope.toggleMode=function(){switch($directive.mode>=0&&$directive.mode<=1?$directive.mode+=1:$directive.mode=0,$directive.pane={},$directive.mode){case 0:$directive.pane.month=1;break;case 1:$directive.pane.month=12;break;case 2:$directive.pane.year=12}scope.build()},scope.hide=function(){copyEl&&(copyEl.css({display:"none"}),copyEl=null)},scope.$select=function(date){$directive.viewDate=date,0===$directive.mode?(ctrl.$setViewValue(date),scope.hide(),content.find("#input").blur()):$directive.mode>0&&($directive.mode-=1,scope.build())},content.find("#input").blur(function(){scope.hide()}),scope.build=function(){if((null===$directive.viewDate||void 0===$directive.viewDate)&&($directive.viewDate=new Date),1===$directive.mode&&(scope.title=dateCalculator.format($directive.viewDate,"yyyy"),scope.rows=calView.monthInRows($directive.viewDate)),0===$directive.mode&&(scope.title=dateCalculator.format($directive.viewDate,options.yearTitleFormat),scope.rows=calView.daysInRows($directive.viewDate,$directive.selectedDate)),2===$directive.mode){var currentYear=parseInt(dateCalculator.format($directive.viewDate,"yyyy"));scope.title=currentYear-11+"-"+currentYear,scope.rows=calView.yearInRows($directive.viewDate)}};var templateElem,fetchPromises=[],promise=haalTemplateOp("templates/tinkDatePickerField.html");promise.then(function(template){angular.isObject(template)&&(template=template.data),templateElem=$compile(template),templateElem=templateElem(scope,function(){})})}}}]),angular.module("tink.datepickerRange",["tink.dateHelper","tink.safeApply"]).directive("tinkDatepickerRange",["$q","$templateCache","$http","calView","$sce","$compile","dateCalculator","$window",function($q,$templateCache,$http,calView,$sce,$compile,dateCalculator,$window){return{restrict:"E",replace:!0,require:["?^form"],templateUrl:"templates/tinkDatePickerRangeInputs.html",controller:function($scope,$attrs){$scope.dynamicName=$attrs.name},scope:{firstDate:"=",lastDate:"="},link:function(scope,element,attrs,form){function buildView(){$directive.tbody.firstDateElem=element.find("tbody")[0],$directive.tbody.lastDateElem=element.find("tbody")[1];var htmlFirst=calView.createMonthDays($directive.viewDate,scope.firstDate,scope.lastDate,"prevMonth");angular.element($directive.tbody.firstDateElem).replaceWith($compile(htmlFirst)(scope));var copyViewDate=new Date($directive.viewDate);copyViewDate.setDate(5),copyViewDate.setMonth(copyViewDate.getMonth()+1),scope.firstTitle=dateCalculator.format($directive.viewDate,"mmmm yyyy"),scope.lastTitle=dateCalculator.format(copyViewDate,"mmmm yyyy");var htmlLast=calView.createMonthDays(copyViewDate,scope.firstDate,scope.lastDate,"nextMonth");angular.element($directive.tbody.lastDateElem).replaceWith($compile(htmlLast)(scope))}function nextMonth(){$directive.viewDate.setDate(1),$directive.viewDate.setMonth($directive.viewDate.getMonth()+1),setViewDate($directive.viewDate)}function prevMonth(){$directive.viewDate.setDate(1),$directive.viewDate.setMonth($directive.viewDate.getMonth()-1),setViewDate($directive.viewDate)}function setViewDate(viewDate){if(angular.isDate(viewDate)&&null!==viewDate)if(angular.isDate(viewDate)){var hulpDate=new Date(viewDate.getTime());hulpDate.setDate(1),hulpDate.setMonth(hulpDate.getMonth()-1),dateCalculator.isSameMonth(viewDate,$directive.viewDate)||dateCalculator.isSameMonth(hulpDate,$directive.viewDate)||($directive.viewDate=new Date(viewDate)),buildView()}else console.logerror("Wrong date")}function haalTemplateOp(template){return fetchPromises[template]?fetchPromises[template]:fetchPromises[template]=$q.when($templateCache.get(template)||$http.get(template)).then(function(res){return angular.isObject(res)?($templateCache.put(template,res.data),res.data):res})}function init(){isTouch&&(config.dateFormat="yyyy-mm-dd",angular.element($directive.focused.firstDateElem).prop("type","date"),angular.element($directive.focused.lastDateElem).prop("type","date")),scope.dateFormat=config.dateFormat,bindEvents()}function $onMouseDown(evt){if(evt.target.isContentEditable?(evt.target.focus(),isTouch&&(evt.preventDefault(),evt.stopPropagation())):(evt.preventDefault(),evt.stopPropagation()),isTouch){var targetEl=angular.element(evt.target);"button"!==targetEl[0].nodeName.toLowerCase()&&(targetEl=targetEl.parent()),targetEl.triggerHandler("click")}}function hide(evt){evt.relatedTarget&&"INPUT"===evt.relatedTarget.nodeName||(templateElem.css({display:"none"}),$directive.open=!1,$directive.focusedModel=null)}function bindEvents(){isTouch||element.bind("touchstart mousedown",$onMouseDown),angular.element($directive.focused.firstDateElem).bind("blur",hide),angular.element($directive.focused.lastDateElem).bind("blur",hide),angular.element($directive.focused.firstDateElem).bind("focus",function(){$directive.focusedModel="firstDateElem"}),angular.element($directive.focused.lastDateElem).bind("focus",function(){$directive.focusedModel="lastDateElem"})}function show(){$directive.open||(setViewDate(null!==$directive.focusedModel?"firstDateElem"===$directive.focusedModel&&angular.isDate(scope.firstDate)?scope.firstDate:"firstDateElem"===$directive.focusedModel&&angular.isDate(scope.lastDate)?scope.lastDate:"lastDateElem"===$directive.focusedModel&&angular.isDate(scope.lastDate)?scope.lastDate:"lastDateElem"===$directive.focusedModel&&angular.isDate(scope.firstDate)?scope.firstDate:new Date:new Date),$directive.open=!0,templateElem.css({display:"block"}))}var $directive={open:!1,focused:{firstDateElem:element.find("div[tink-format-input] div:first"),lastDateElem:element.find("div[tink-format-input] div:last")},calendar:{first:element.find("span.input-group-addon:first"),last:element.find("span.input-group-addon:last")},tbody:{firstDateElem:null,lastDateElem:null},focusedModel:null,selectedDates:{first:scope.firstDate,last:scope.lastDate},valid:{firstDateElem:!1,lastDateElem:!1},mouse:0,viewDate:new Date,hardCodeFocus:!1};attrs.name&&(scope.ctrlconst=form[0][attrs.name]),$directive.calendar.first.on("click",function(){$directive.focused.firstDateElem.focus(),show()}),$directive.calendar.last.on("click",function(){$directive.focused.lastDateElem.focus(),show()});var isDateSupported=function(){var i=document.createElement("input");return i.setAttribute("type","date"),"text"!==i.type},isNative=/(ip(a|o)d|iphone|android)/gi.test($window.navigator.userAgent),isTouch="createTouch"in $window.document&&isNative&&isDateSupported(),dayLabels=["ma","di","wo","do","vr","za","zo"];scope.dayLabels=$sce.trustAsHtml("<th>"+dayLabels.join("</th><th>")+"</th>"),scope.$watch("firstDate",function(){null!==scope.firstDate&&($directive.focusedModel="firstDateElem",scope.$select(scope.firstDate,null,!0),buildView())}),scope.$watch("lastDate",function(){null!==scope.lastDate&&($directive.focusedModel="lastDateElem",scope.$select(scope.lastDate,null,!0),buildView())});var templateElem,config={dateFormat:"dd/mm/yyyy"},fetchPromises={},promise=haalTemplateOp("templates/tinkDatePickerRange.html");promise.then(function(template){angular.isObject(template)&&(template=template.data),templateElem=$compile(template),templateElem=templateElem(scope,function(){}),templateElem.css({position:"absolute",display:"none"}),element.append(templateElem),init()}),scope.$select=function(el,format,hardcoded){angular.isDefined(format)||(format="yyyy/mm/dd");var date;date=angular.isDate(el)?el:dateCalculator.getDate(el,format),null!==$directive.focusedModel&&("firstDateElem"===$directive.focusedModel?(scope.firstDate=date,angular.isDate(scope.lastDate)?dateCalculator.dateBeforeOther(scope.firstDate,scope.lastDate)&&(scope.lastDate=null,hardcoded||$directive.focused.lastDateElem.focus()):hardcoded||setTimeout(function(){$directive.focused.lastDateElem.focus()},1)):"lastDateElem"===$directive.focusedModel&&(scope.lastDate=date,angular.isDate(scope.firstDate)?dateCalculator.dateBeforeOther(scope.firstDate,scope.lastDate)&&(scope.firstDate=null,hardcoded||$directive.focused.firstDateElem.focus()):hardcoded||setTimeout(function(){$directive.focused.firstDateElem.focus()},1)))},scope.$selectPane=function(value){value?nextMonth():prevMonth()},element.on("mouseleave",function(){$directive.mouse=0}),element.on("mouseenter",function(){$directive.mouse=1})}}}]).directive("dynamicName",function($compile,$parse){return{restrict:"A",terminal:!0,priority:1e5,link:function(scope,elem){var name=$parse(elem.attr("dynamic-name"))(scope);elem.removeAttr("dynamic-name"),elem.attr("name",name),$compile(elem)(scope)}}}),angular.module("tink.dropdown",[]).constant("dropdownConfig",{openClass:"open"}).service("tinkDropdownService",["$document",function($document){var openScope=null;this.open=function(dropdownScope){openScope||($document.bind("click",closeDropdown),$document.bind("keydown",escapeKeyBind)),openScope&&openScope!==dropdownScope&&(openScope.isOpen=!1),openScope=dropdownScope},this.close=function(dropdownScope){openScope===dropdownScope&&(openScope=null,$document.unbind("click",closeDropdown),$document.unbind("keydown",escapeKeyBind))};var closeDropdown=function(evt){if(openScope){var toggleElement=openScope.getToggleElement();evt&&toggleElement&&toggleElement[0].contains(evt.target)||openScope.$apply(function(){openScope.isOpen=!1})}},escapeKeyBind=function(evt){27===evt.which&&(openScope.focusToggleElement(),closeDropdown())}}]).controller("tinkDropdownController",["$scope","$attrs","$parse","dropdownConfig","tinkDropdownService","$animate",function($scope,$attrs,$parse,dropdownConfig,dropdownService,$animate){var getIsOpen,self=this,scope=$scope.$new(),openClass=dropdownConfig.openClass,setIsOpen=angular.noop,toggleInvoker=$attrs.onToggle?$parse($attrs.onToggle):angular.noop;this.init=function(element){self.$element=element,$attrs.isOpen&&(getIsOpen=$parse($attrs.isOpen),setIsOpen=getIsOpen.assign,$scope.$watch(getIsOpen,function(value){scope.isOpen=!!value}))},this.toggle=function(open){return scope.isOpen=arguments.length?!!open:!scope.isOpen,scope.isOpen},this.isOpen=function(){return scope.isOpen},scope.getToggleElement=function(){return self.toggleElement},scope.focusToggleElement=function(){self.toggleElement&&self.toggleElement[0].focus()},scope.$watch("isOpen",function(isOpen,wasOpen){$animate[isOpen?"addClass":"removeClass"](self.$element,openClass),isOpen?(scope.focusToggleElement(),dropdownService.open(scope)):dropdownService.close(scope),setIsOpen($scope,isOpen),angular.isDefined(isOpen)&&isOpen!==wasOpen&&toggleInvoker($scope,{open:!!isOpen})}),$scope.$on("$locationChangeSuccess",function(){scope.isOpen=!1}),$scope.$on("$destroy",function(){scope.$destroy()})}]).directive("tinkDropdown",function(){return{controller:"tinkDropdownController",link:function(scope,element,attrs,dropdownCtrl){dropdownCtrl.init(element)}}}).directive("tinkDropdownToggle",function(){return{require:"?^tinkDropdown",link:function(scope,element,attrs,dropdownCtrl){if(dropdownCtrl){dropdownCtrl.toggleElement=element;var toggleDropdown=function(event){event.preventDefault(),element.hasClass("disabled")||attrs.disabled||scope.$apply(function(){dropdownCtrl.toggle()})};element.bind("click",toggleDropdown),element.attr({"aria-haspopup":!0,"aria-expanded":!1}),scope.$watch(dropdownCtrl.isOpen,function(isOpen){element.attr("aria-expanded",!!isOpen)}),scope.$on("$destroy",function(){element.unbind("click",toggleDropdown)})}}}}),angular.module("tink.format",[]).directive("tinkFormatInput",["dateCalculator","$window","safeApply",function(dateCalculator,$window,safeApply){return{replace:!0,require:["ngModel","?^form"],template:'<div><div id="input" class="faux-input" contenteditable="true">{{placeholder}}</div></div>',link:function(scope,elem,attr,ctrl){function handleInput(key,cur){var cursor,selection;if(cur?(cursor=cur.start,selection=cur.end):(cursor=getCaretSelection().start,selection=getCaretSelection().end),cursor>-1&&cursor<format.length)if("0"===format[cursor])charIs(key,"0")?(cursor!==selection&&(newVa=newVa.replaceRange(cursor,selection,placeholder)),newVa=newVa.replaceAt(cursor,key),cursor+=1):newVa=newVa.replaceRange(cursor,selection,placeholder);else{if(charIs(key,"0"))return void handleInput(key,{start:cursor+1,end:selection+1});cursor+=1}deleteVal=-1,setValue(cursor)}function validValue(value){if(value){if(value.length!==format.length)return!1;for(var i=0;i<format.length;i++){if("0"===format[i]&&!charIs(value[i],"0"))return!1;if("0"!==format[i]&&format[i]!==value[i])return!1}return!0}return!1}function handleBackspace(){var cursor=getCaretSelection();cursor.start===cursor.end&&cursor.start>0?(newVa=newVa.replaceAt(cursor.start-1,placeholder[cursor.start-1]),setValue(cursor.start-1)):(newVa=newVa.replaceRange(cursor.start,cursor.end,placeholder),setValue(cursor.start))}function handleDelete(){var cursor=getCaretSelection();if(cursor.start===cursor.end){for(var pos=cursor.start;placeholder[cursor.start]===newVa[cursor.start]&&cursor.start<placeholder.length-1;)cursor.start++;newVa=newVa.replaceAt(cursor.start,placeholder[cursor.start]),setValue(pos)}else newVa=newVa.replaceRange(cursor.start,cursor.end,placeholder),setValue(cursor.start)}function setCursor(cur){for(var el=elem.find("#input")[0],range=document.createRange(),sel=window.getSelection(),lengths=0,chosenChild=0,i=0;i<elem.find("#input")[0].childNodes.length;i++){var node=elem.find("#input")[0].childNodes[i];"#text"===node.nodeName?(lengths+=node.length,chosenChild=node):(lengths+=node.childNodes[0].length,chosenChild=node.childNodes[0]),lengths>=cur&&(cur-=lengths-chosenChild.length,i=9999)}range.setStart(chosenChild,cur),range.collapse(!0),sel.removeAllRanges(),sel.addRange(range),el.focus()}function validFormat(date,format){var dateObject;if(angular.isDefined(date)&&null!==date){if("string"==typeof date){if(10!==date.length)return!1;if(!isTouch&&!/^(?:(?:31(\/)(?:0?[13578]|1[02]))\1|(?:(?:29|30)(\/|)(?:0?[1,3-9]|1[0-2])\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(\/)0?2\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(\/|)(?:(?:0?[1-9])|(?:1[0-2]))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$/.test(date))return!1;dateObject=dateCalculator.getDate(date,format)}else{if(!angular.isDate(date))return"function"==typeof date?validFormat(date(),format):!1;dateObject=date}return"Invalid Date"!==dateObject.toString()}}var forms=ctrl[1];if(forms&&forms.$addControl(ctrl[0]),ctrl=ctrl[0],attr.format&&attr.placeholder){var format=attr.format,placeholder=attr.placeholder,dateFormat="dd/mm/yyyy";scope.format=format,scope.placeholder=placeholder;var type="";angular.isDefined(attr.date)&&(type="date");var newVa=placeholder;String.prototype.replaceAt=function(index,character){return this.substr(0,index)+character+this.substr(index+character.length)},String.prototype.replaceRange=function(start,stop,value){return this.substr(0,start)+value.substr(start,stop-start)+this.substr(stop)};var ctrlForm;ctrlForm=attr.ctrlModel&&forms?forms[scope[attr.ctrlModel]]:ctrl;var deleteVal=-1,valueToHtml=function(value){for(var html="",plHtml='<span class="placeholder">',plEHtml="</span>",open=0,i=0;i<placeholder.length;i++)placeholder[i]===value[i]?0===open?(html+=plHtml+value[i],open=1):1===open&&(html+=value[i]):1===open?(html+=plEHtml+value[i],open=0):html+=value[i];return 1===open&&(html+=plEHtml),html},setValue=function(cur){elem.find("#input").html(valueToHtml(newVa)),cur>-1&&cur<=format.length&&setCursor(cur),ctrl.$dirty=!0,ctrl.$pristine=!1},charIs=function(char,base){return char=char.trim(),"0"===base&&""!==char&&char>-1&&10>char?!0:!1},getCaretSelection=function(){var caretOffset=0,element=elem.get(0);element.focus();var sel,startOffset,doc=element.ownerDocument||element.document,win=doc.defaultView||doc.parentWindow;if("undefined"!=typeof win.getSelection){if(sel=win.getSelection(),sel.rangeCount>0){var range=win.getSelection().getRangeAt(0),preCaretRange=range.cloneRange();preCaretRange.selectNodeContents(element),preCaretRange.setEnd(range.endContainer,range.endOffset),caretOffset=preCaretRange.toString().length,startOffset=caretOffset-window.getSelection().toString().length}}else if((sel=doc.selection)&&"Control"!==sel.type){var textRange=sel.createRange(),preCaretTextRange=doc.body.createTextRange();preCaretTextRange.moveToElementText(element),preCaretTextRange.setEndPoint("EndToEnd",textRange),caretOffset=preCaretTextRange.text.length,startOffset=caretOffset-document.selection.createRange().text.length}return{start:startOffset,end:caretOffset}};elem.find("#input").bind("keydown",function(event){return 8===event.which?(handleBackspace(),!1):46===event.which?(handleDelete(),!1):void 0});var firstclick=0;elem.find("#input").bind("mousedown",function(){setTimeout(function(){placeholder===newVa&&1!==firstclick&&(setCursor(0),firstclick=1)},1)}),elem.find("#input").keypress(function(event){var key=String.fromCharCode(event.which);return setTimeout(function(){handleInput(key)},1),!1}),ctrl.$parsers.unshift(function(viewValue){return handleFormat(viewValue),viewValue}),scope.$watch("ngModel",function(newVal,oldVal){newVal!==oldVal&&handleFormat(newVal)});var isRequired=function(){attr.required&&(placeholder!==newVa?ctrlForm.$setValidity("required",!0):ctrlForm.$setValidity("required",!1))};elem.find("#input").on("blur",function(){var pre="";attr.validName&&(pre=attr.validName),safeApply(scope,function(){"date"===type&&validFormat(newVa,"dd/mm/yyyy")?(ctrlForm.$setValidity(pre+"date",!0),ctrl.$setViewValue(dateCalculator.getDate(newVa,"dd/mm/yyyy"))):"date"===type?(ctrlForm.$setValidity(pre+"date",!1),ctrl.$setViewValue(null)):validValue(newVa)?(ctrl.$setViewValue(newVa),ctrlForm.$setValidity(pre+"format",!0)):(ctrl.$setViewValue(null),placeholder===newVa?ctrlForm.$setValidity(pre+"format",!0):ctrlForm.$setValidity(pre+"format",!1)),isRequired()})});var isNative=/(ip(a|o)d|iphone|android)/gi.test($window.navigator.userAgent),isTouch="createTouch"in $window.document&&isNative;ctrl.$formatters.push(function(modelValue){(null===modelValue||void 0===modelValue)&&(newVa=placeholder,setValue(),modelValue=null),handleFormat(modelValue),ctrl.$setPristine()});var handleFormat=function(modelValue){if("function"==typeof modelValue&&(modelValue=modelValue()),"date"===type){var pre="";attr.validName&&(pre=attr.validName);var date;date=angular.isDate(modelValue)?dateCalculator.formatDate(modelValue,dateFormat):modelValue,validValue(date)&&validFormat(date,"dd/mm/yyyy")?(newVa=date,ctrlForm.$setValidity(pre+"date",!0),setValue()):ctrlForm.$setValidity(pre+"date",!1)}else"string"==typeof modelValue&&(validValue(modelValue)?(newVa=modelValue,setValue()):ctrl.$setViewValue(null));return isRequired(),modelValue}}}}}]).controller("TinkFormatController",[function(){var self=this;this.groups={},this.init=function(accordion,element,opts){self.$accordion=accordion,self.$options=opts,self.$accordion.init(element)}}]),angular.module("tink.sideNav",[]),angular.module("tink.sideNav").directive("tinkNavAside",["tinkApi",function(tinkApi){return{restrict:"AE",link:function(scope,elem,attr){if(tinkApi.sideNavigation&&tinkApi.sideNavToggle){var opts={};attr.accordion&&(opts.accordion="true"===attr.accordion),attr.accordionFirst&&(opts.gotoPage="true"===attr.accordionFirst);var sideNav=tinkApi.sideNavigation(elem);sideNav.init(opts),attr.toggleId&&tinkApi.sideNavToggle.register(attr.toggleId,sideNav)}}}}]),angular.module("tink.popOver",["tink.tooltip"]).directive("tinkPopoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"templates/popover.html"}}).directive("tinkPopover",["$tooltip",function($tooltip){return $tooltip("tinkPopover","popover","click")}]),angular.module("tink.timepicker",[]),angular.module("tink.timepicker").directive("tinkTimepicker",["$window",function($window){return{restrict:"AE",template:'<div class="timepicker"><input type="text" ng-model="ngModel" /><span class="timepicker-later" role="spinbutton"></span><span class="timepicker-earlier" role="spinbutton"></span></div>',require:"ngModel",replace:!0,scope:{ngModel:"&"},link:function(scope,elem,attr,ngModel){function isDateSupported(){var i=document.createElement("input");return i.setAttribute("type","date"),"text"!==i.type}var current={hour:{num:0,reset:!0,prev:-1,start:!0},min:{num:0,reset:!0,start:!0}},inputField=elem.find("input"),isNative=/(ip(a|o)d|iphone|android)/gi.test($window.navigator.userAgent);isNative&&isDateSupported()&&inputField.prop("type","time"),elem.bind("mousedown",function(){return!1}),elem.find(".timepicker-later").bind("click",function(){return 1===selected?addHour(1):2===selected&&addMinute(1),!1});var bindEvent=function(){inputField.unbind("input").unbind("keydown").unbind("change").unbind("click").unbind("mousedown"),inputField.keydown(function(e){var keycode=e.keyCode;return keycode>47&&58>keycode||keycode>95&&106>keycode?1===selected?handleHour(keycode):handleMinute(keycode):39===keycode&&1===selected?selectMinute(!0):37===keycode&&2===selected?selectHour(!0):38===keycode?1===selected?addHour(1):2===selected&&addMinute(1):40===keycode&&(1===selected?addHour(-1):2===selected&&addMinute(-1)),9!==keycode?!1:void 0})};elem.find(".timepicker-earlier").bind("click",function(){return 1===selected?addHour(-1):2===selected&&addMinute(-1),!1}),isNative&&isDateSupported()?inputField.val("00:00:00"):bindEvent();var keycodeMapper={},mapKeycodes=function(){for(var hulp=0,i=48;57>=i;i++)keycodeMapper[i]=hulp,hulp++;hulp=0;for(var j=96;105>=j;j++)keycodeMapper[j]=hulp,hulp++};mapKeycodes();var handleHour=function(key){var num=keycodeMapper[key];current.hour.reset&&(current.hour.num=0,current.hour.prev=-1,current.hour.reset=!current.hour.reset),current.hour.start=!1,scope.setHour(num)},selectHour=function(reset){isNative&&isDateSupported()||inputField[0].setSelectionRange(0,2),selected=1,current.hour.reset=reset,current.min.reset=!1},selectMinute=function(reset){isNative&&isDateSupported()||inputField[0].setSelectionRange(3,5),selected=2,current.min.reset=reset,current.hour.reset=!1};scope.setHour=function(num){var select=2,firstNumber=parseInt(hourString()[0]),lastNumber=parseInt(hourString()[1]);2>lastNumber?(current.hour.num=10*lastNumber+num,select=-1!==current.hour.prev?2:0!==firstNumber?2:1):2===lastNumber?(current.hour.num=4>num?10*lastNumber+num:num,select=2):(current.hour.num=num,select=2),current.hour.prev=num,setValue(select)};var hourString=function(){return current.hour.start?"--":("0"+current.hour.num).slice(-2)},minString=function(){return current.min.start?"--":("0"+current.min.num).slice(-2)};scope.setMinute=function(num){var lastNumber=parseInt(minString()[1]);isNaN(lastNumber)||0===lastNumber||lastNumber>5?current.min.num=num:6>lastNumber&&(current.min.num=10*lastNumber+num),setValue(2)};var setValue=function(select){if(isNative&&isDateSupported()){var timeStr=hourString()+":"+minString()+":00";timeStr.replace("-","0"),ngModel.$setViewValue(timeStr)}else ngModel.$setViewValue(hourString()+":"+minString());ngModel.$render(),1===select?selectHour():2===select&&selectMinute(),current.hour.start||current.min.start?ngModel.$setValidity("time",!1):ngModel.$setValidity("time",!0)},handleMinute=function(key){var num=keycodeMapper[key];current.min.start=!1,scope.setMinute(num)},selected=-1,getHourOffset=function(){var padding=parseInt(inputField.css("padding-left"),10);return padding+inputField.val().substr(0,2).width(inputField.css("font"),inputField.css("padding"))+2},getMinOffset=function(){return getHourOffset()+inputField.val().substr(3,2).width(inputField.css("font"),inputField.css("padding"))+2},pollyOffset=function(e){var target=e.target||e.srcElement,style=target.currentStyle||window.getComputedStyle(target,null),borderLeftWidth=parseInt(style.borderLeftWidth,10),rect=target.getBoundingClientRect(),offsetX=e.clientX-borderLeftWidth-rect.left;return offsetX};inputField.bind("mousedown",function(evt){var offset=pollyOffset(evt);return offset<getHourOffset()||offset>getMinOffset()?(selectHour(!0),selected=1):(selectMinute(!0),selected=2),inputField.focus(),!1}),String.prototype.width=function(font,padding){var f=font||"15px arial",p=padding||"",o=$("<div>"+this+"</div>").css({position:"absolute","float":"left","white-space":"nowrap",visibility:"hidden",font:f,padding:p}).appendTo($("body")),w=o.width();return o.remove(),w};var addMinute=function(size){current.min.start=!1;var newMin=current.min.num+size;newMin>0&&60>newMin?current.min.num=newMin:newMin>=60||0>newMin?(addHour(Math.floor(newMin/60)),current.min.num=0>newMin%60?60+newMin%60:newMin%60):current.min.num=0,setValue(2)},clearSelection=function(){isNative&&isDateSupported()||inputField[0].setSelectionRange(0,0)},addHour=function(size){current.hour.start=!1;var newHour=current.hour.num+size;current.hour.num=newHour>0&&24>newHour?newHour:0>newHour?24+newHour:0,setValue(1),current.hour.reset=!0},reset=function(){current={hour:{num:0,reset:!0,prev:-1,start:!0},min:{num:0,reset:!0,start:!0}},ngModel.$setValidity("time",!1),setValue()};scope.$watch("ngModel",function(newVal){var date=null,hour=null,minute=null;date="function"==typeof newVal?newVal():newVal,angular.isDate(date)?(hour=date.getHours(),minute=date.getMinutes()):"string"==typeof date&&date.length>=5?/^([01]\d|2[0-3]):?([0-5]\d)$/.test(date.substr(0,5))&&(hour=parseInt(date.substr(0,2)),minute=parseInt(date.substr(3,2))):reset(),hour&&minute&&(current.hour.start=!1,current.hour.num=hour,current.min.start=!1,current.min.num=minute,setValue())}),ngModel.$formatters.unshift(function(modelValue){var date=modelValue;if(console.log(date),angular.isDate(date)){var hour=date.getHours(),minute=date.getMinutes();hour&&minute&&(current.hour.start=!1,scope.setHour(hour),current.min.start=!1,scope.setMinute(minute),clearSelection())}else reset()}),ngModel.$parsers.push(function(time){inputField.val(time);var hour=parseInt(time.substr(0,2)),minute=parseInt(time.substr(3,2));if(hour&&minute){var date=new Date;return date.setHours(hour),date.setMinutes(minute),date}})}}}]),angular.module("tink.sideNav").directive("tinkSidenavCollapse",["tinkApi",function(tinkApi){return{restrict:"A",link:function(scope,elem,attr){tinkApi.sideNavigation&&tinkApi.sideNavToggle&&elem.bind("click",function(){return attr.tinkSidenavCollapse&&""!==attr.tinkSidenavCollapse.trim()?(tinkApi.sideNavToggle.toggleById(attr.tinkSidenavCollapse),!1):void 0})}}}]),angular.module("tink.tooltip",[]).provider("$tooltip",function(){function snake_case(name){var regexp=/[A-Z]/g,separator="-";return name.replace(regexp,function(letter,pos){return(pos?separator:"")+letter.toLowerCase()})}var defaultOptions={placement:"top",animation:!0,popupDelay:0},triggerMap={mouseenter:"mouseleave",click:"click",focus:"blur"},globalOptions={};this.options=function(value){angular.extend(globalOptions,value)},this.setTriggers=function(triggers){angular.extend(triggerMap,triggers)},this.$get=["$window","$compile","$timeout","$document","$position","$interpolate",function($window,$compile,$timeout,$document,$position,$interpolate){return function(type,prefix,defaultTriggerShow){function getTriggers(trigger){var show=trigger||options.trigger||defaultTriggerShow,hide=triggerMap[show]||show;
return{show:show,hide:hide}}var options=angular.extend({},defaultOptions,globalOptions),directiveName=snake_case(type),startSym=$interpolate.startSymbol(),endSym=$interpolate.endSymbol(),template="<div "+directiveName+'-popup title="'+startSym+"title"+endSym+'" content="'+startSym+"content"+endSym+'" placement="'+startSym+"placement"+endSym+'" animation="animation" is-open="isOpen"></div>';return{restrict:"EA",compile:function(){var tooltipLinker=$compile(template);return function(scope,element,attrs){function toggleTooltipBind(){ttScope.isOpen?hideTooltipBind():showTooltipBind()}function showTooltipBind(){(!hasEnableExp||scope.$eval(attrs[prefix+"Enable"]))&&(prepareTooltip(),ttScope.popupDelay?popupTimeout||(popupTimeout=$timeout(show,ttScope.popupDelay,!1),popupTimeout.then(function(reposition){reposition()})):show()())}function hideTooltipBind(){scope.$apply(function(){hide()})}function show(){return popupTimeout=null,transitionTimeout&&($timeout.cancel(transitionTimeout),transitionTimeout=null),ttScope.content?(createTooltip(),tooltip.css({top:0,left:0,display:"block"}),appendToBody?$document.find("body").append(tooltip):element.after(tooltip),positionTooltip(),ttScope.isOpen=!0,ttScope.$digest(),positionTooltip):angular.noop}function hide(){ttScope.isOpen=!1,$timeout.cancel(popupTimeout),popupTimeout=null,ttScope.animation?transitionTimeout||(transitionTimeout=$timeout(removeTooltip,500)):removeTooltip()}function createTooltip(){tooltip&&removeTooltip(),tooltipLinkedScope=ttScope.$new(),tooltip=tooltipLinker(tooltipLinkedScope,angular.noop)}function removeTooltip(){transitionTimeout=null,tooltip&&(tooltip.remove(),tooltip=null),tooltipLinkedScope&&(tooltipLinkedScope.$destroy(),tooltipLinkedScope=null)}function prepareTooltip(){prepPlacement(),prepPopupDelay()}function prepPlacement(){var val=attrs[prefix+"Placement"];ttScope.placement=angular.isDefined(val)?val:options.placement}function prepPopupDelay(){var val=attrs[prefix+"PopupDelay"],delay=parseInt(val,10);ttScope.popupDelay=isNaN(delay)?options.popupDelay:delay}function prepTriggers(){var val=attrs[prefix+"Trigger"];unregisterTriggers(),triggers=getTriggers(val),triggers.show===triggers.hide?element.bind(triggers.show,toggleTooltipBind):(element.bind(triggers.show,showTooltipBind),element.bind(triggers.hide,hideTooltipBind))}var tooltip,tooltipLinkedScope,transitionTimeout,popupTimeout,appendToBody=angular.isDefined(options.appendToBody)?options.appendToBody:!1,triggers=getTriggers(void 0),hasEnableExp=angular.isDefined(attrs[prefix+"Enable"]),ttScope=scope.$new(!0),positionTooltip=function(){var ttPosition=$position.positionElements(element,tooltip,ttScope.placement,appendToBody);ttPosition.top+="px",ttPosition.left+="px",tooltip.css(ttPosition)};ttScope.isOpen=!1,attrs.$observe(type,function(val){ttScope.content=val,!val&&ttScope.isOpen&&hide()}),attrs.$observe(prefix+"Title",function(val){ttScope.title=val});var unregisterTriggers=function(){element.unbind(triggers.show,showTooltipBind),element.unbind(triggers.hide,hideTooltipBind)};prepTriggers();var animation=scope.$eval(attrs[prefix+"Animation"]);ttScope.animation=angular.isDefined(animation)?!!animation:options.animation;var appendToBodyVal=scope.$eval(attrs[prefix+"AppendToBody"]);appendToBody=angular.isDefined(appendToBodyVal)?appendToBodyVal:appendToBody,appendToBody&&scope.$on("$locationChangeSuccess",function(){ttScope.isOpen&&hide()}),scope.$on("$destroy",function(){$timeout.cancel(transitionTimeout),$timeout.cancel(popupTimeout),unregisterTriggers(),removeTooltip(),ttScope=null})}}}}}]}).factory("$position",["$document","$window",function($document,$window){function getStyle(el,cssprop){return el.currentStyle?el.currentStyle[cssprop]:$window.getComputedStyle?$window.getComputedStyle(el)[cssprop]:el.style[cssprop]}function isStaticPositioned(element){return"static"===(getStyle(element,"position")||"static")}var parentOffsetEl=function(element){for(var docDomEl=$document[0],offsetParent=element.offsetParent||docDomEl;offsetParent&&offsetParent!==docDomEl&&isStaticPositioned(offsetParent);)offsetParent=offsetParent.offsetParent;return offsetParent||docDomEl};return{position:function(element){var elBCR=this.offset(element),offsetParentBCR={top:0,left:0},offsetParentEl=parentOffsetEl(element[0]);offsetParentEl!==$document[0]&&(offsetParentBCR=this.offset(angular.element(offsetParentEl)),offsetParentBCR.top+=offsetParentEl.clientTop-offsetParentEl.scrollTop,offsetParentBCR.left+=offsetParentEl.clientLeft-offsetParentEl.scrollLeft);var boundingClientRect=element[0].getBoundingClientRect();return{width:boundingClientRect.width||element.prop("offsetWidth"),height:boundingClientRect.height||element.prop("offsetHeight"),top:elBCR.top-offsetParentBCR.top,left:elBCR.left-offsetParentBCR.left}},offset:function(element){var boundingClientRect=element[0].getBoundingClientRect();return{width:boundingClientRect.width||element.prop("offsetWidth"),height:boundingClientRect.height||element.prop("offsetHeight"),top:boundingClientRect.top+($window.pageYOffset||$document[0].documentElement.scrollTop),left:boundingClientRect.left+($window.pageXOffset||$document[0].documentElement.scrollLeft)}},positionElements:function(hostEl,targetEl,positionStr,appendToBody){var hostElPos,targetElWidth,targetElHeight,targetElPos,positionStrParts=positionStr.split("-"),pos0=positionStrParts[0],pos1=positionStrParts[1]||"center";hostElPos=appendToBody?this.offset(hostEl):this.position(hostEl),targetElWidth=targetEl.prop("offsetWidth"),targetElHeight=targetEl.prop("offsetHeight");var shiftWidth={center:function(){return hostElPos.left+hostElPos.width/2-targetElWidth/2},left:function(){return hostElPos.left},right:function(){return hostElPos.left+hostElPos.width}},shiftHeight={center:function(){return hostElPos.top+hostElPos.height/2-targetElHeight/2},top:function(){return hostElPos.top},bottom:function(){return hostElPos.top+hostElPos.height}};switch(pos0){case"right":targetElPos={top:shiftHeight[pos1](),left:shiftWidth[pos0]()};break;case"left":targetElPos={top:shiftHeight[pos1](),left:hostElPos.left-targetElWidth};break;case"bottom":targetElPos={top:shiftHeight[pos0](),left:shiftWidth[pos1]()};break;default:targetElPos={top:hostElPos.top-targetElHeight,left:shiftWidth[pos1]()}}return targetElPos}}}]).directive("tinkTooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"templates/tooltip.html"}}).directive("tinkTooltip",["$tooltip",function($tooltip){return $tooltip("tinkTooltip","tooltip","mouseenter")}]).directive("tinkTooltipHtmlUnsafePopup",function($sce){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"templates/tooltip.html",link:function($scope){$scope.content=$sce.trustAsHtml($scope.content)}}}).directive("tinkTooltipHtmlUnsafe",["$tooltip",function($tooltip){return $tooltip("tinkTooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("tink.topNav",[]),angular.module("tink.topNav").directive("tinkTopNav",["$document","$window","tinkApi",function($document,$window,tinkApi){return{restrict:"AE",priority:99,link:function(scope,elem){tinkApi.sideNavigation&&tinkApi.sideNavToggle&&tinkApi.topNavigation(elem).init()}}}]),angular.module("tink.validDate",["tink.dateHelper","tink.safeApply"]).directive("tinkValidDate",["$timeout","$filter","dateCalculator","safeApply","$window",function($timeout,$filter,dateCalculator,safeApply,$window){return{require:"ngModel",priority:99,link:function($scope,$element,$attrs,ctrl){function checkForValid(viewValue){return ctrl.$setValidity("date",validFormat(viewValue,format)),viewValue}function validFormat(date,format){var dateObject;if(angular.isDefined(date)&&null!==date){if("string"==typeof date){if(10!==date.length)return!1;if(!isTouch&&!/^(?:(?:31(\/)(?:0?[13578]|1[02]))\1|(?:(?:29|30)(\/|)(?:0?[1,3-9]|1[0-2])\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(\/)0?2\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(\/|)(?:(?:0?[1-9])|(?:1[0-2]))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$/.test(date))return!1;dateObject=dateCalculator.getDate(date,format)}else{if(!angular.isDate(date))return"function"==typeof date?validFormat(date(),format):!1;dateObject=date}return"Invalid Date"!==dateObject.toString()}}var isNative=/(ip(a|o)d|iphone|android)/gi.test($window.navigator.userAgent),isTouch="createTouch"in $window.document&&isNative,prevVal="",format=$attrs.format;isTouch&&(format="yyyy-mm-dd"),$element.unbind("input").unbind("keydown").unbind("change"),$element.bind("blur",function(){safeApply($scope,function(){validFormat($element.val(),format)?(checkForValid($element.val(),format),prevVal=$element.val(),ctrl.$setViewValue($element.val())):ctrl.$setViewValue(void 0)})}),$element.bind("input change",function(){safeApply($scope,function(){!validFormat($element.val(),format)})}),ctrl.$formatters.push(checkForValid),ctrl.$parsers.unshift(checkForValid)}}}]),angular.module("tink",["tink.tinkApi","tink.datepickerRange","tink.popOver","tink.tooltip","tink.datepicker","tink.topNav","tink.sideNav","tink.dropdown","tink.templates","tink.validDate","tink.format"]),angular.module("tink.tinkApi",[]),angular.module("tink.tinkApi").provider("tinkApi",function(){var _options={};return{setOptions:function(options){angular.extend(_options,options)},getOptions:function(){return angular.copy(_options)},$get:["$window",function($window){var sideToggle={};return{sideNavigation:$window.tinkApi.sideNavigation,sideNavToggle:{register:function(id,sideElem){sideToggle[id]=sideElem},toggleById:function(id){sideToggle[id]&&sideToggle[id].toggleMenu()}},topNavigation:$window.tinkApi.topNavigation,accordion:$window.tinkApi.accordion}}]}}),angular.module("tink.dateHelper",[]),angular.module("tink.dateHelper").factory("dateCalculator",function(){function stringToDate(_date,_format){var _delimiter;-1!==_format.indexOf("/")?_delimiter="/":-1!==_format.indexOf("-")?_delimiter="-":-1!==_format.indexOf(".")&&(_delimiter=".");var formatLowerCase=_format.toLowerCase(),formatItems=formatLowerCase.split(_delimiter),dateItems=_date.split(_delimiter),monthIndex=formatItems.indexOf("mm"),dayIndex=formatItems.indexOf("dd"),yearIndex=formatItems.indexOf("yyyy"),month=parseInt(dateItems[monthIndex]);month-=1;var formatedDate=new Date(dateItems[yearIndex],month,dateItems[dayIndex]);return formatedDate}var nl={DAY:["Zondag","Maandag","DinsDag","Woensdag","Donderdag","Vrijdag","Zaterdag"],MONTH:["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],SHORTDAY:["Zo","Ma","Di","Wo","Do","Vr","Za"],SHORTMONTH:["Jan","Feb","Mrt","Apr","Mei","Jun","Jul","Aug","Sep","Okt","Nov","Dec"]},dateFormat=function(){var token=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,timezone=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,timezoneClip=/[^-+\dA-Z]/g,pad=function(val,len){for(val=String(val),len=len||2;val.length<len;)val="0"+val;return val};return function(date,mask,utc,lang){var dF=dateFormat;if(1!==arguments.length||"[object String]"!==Object.prototype.toString.call(date)||/\d/.test(date)||(mask=date,date=void 0),date=date?new Date(date):new Date,isNaN(date))throw new SyntaxError("invalid date");mask=String(dF.masks[mask]||mask||dF.masks["default"]).toLowerCase(),"UTC:"===mask.slice(0,4)&&(mask=mask.slice(4),utc=!0);var _=utc?"getUTC":"get",d=date[_+"Date"](),D=date[_+"Day"](),m=date[_+"Month"](),y=date[_+"FullYear"](),H=date[_+"Hours"](),M=date[_+"Minutes"](),s=date[_+"Seconds"](),L=date[_+"Milliseconds"](),o=utc?0:date.getTimezoneOffset(),flags={d:d,dd:pad(d),ddd:lang.SHORTDAY[D],dddd:lang.DAY[D],m:m+1,mm:pad(m+1),mmm:lang.SHORTMONTH[m],mmmm:lang.MONTH[m],yy:String(y).slice(2),yyyy:y,h:H%12||12,hh:pad(H%12||12),H:H,HH:pad(H),M:M,MM:pad(M),s:s,ss:pad(s),l:pad(L,3),L:pad(L>99?Math.round(L/10):L),t:12>H?"a":"p",tt:12>H?"am":"pm",T:12>H?"A":"P",TT:12>H?"AM":"PM",Z:utc?"UTC":(String(date).match(timezone)||[""]).pop().replace(timezoneClip,""),o:(o>0?"-":"+")+pad(100*Math.floor(Math.abs(o)/60)+Math.abs(o)%60,4),S:["th","st","nd","rd"][d%10>3?0:(d%100-d%10!==10)*d%10]};return mask.replace(token,function($0){return $0 in flags?flags[$0]:$0.slice(1,$0.length-1)})}}();return dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"dd/mm/yyyy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},{dateBeforeOther:function(first,last){return new Date(first).getTime()>new Date(last).getTime()&&null!==last?!0:!1},splitRow:function(arr,size){for(var arrays=[];arr.length>0;)arrays.push(arr.splice(0,size));return arrays},daysBetween:function(first,last){return Math.round(Math.abs((first.getTime()-last.getTime())/864e5))},isSameDate:function(a,b){return angular.isDate(a)&&angular.isDate(b)?(a.setHours(0,0,0,0),b.setHours(0,0,0,0),a.getTime()===b.getTime()):!1},isSameMonth:function(a,b){return angular.isDate(a)&&angular.isDate(b)?(a.setHours(0,0,0,0),b.setHours(0,0,0,0),a.getMonth()===b.getMonth()&&a.getFullYear()===b.getFullYear()):!1},getDate:function(date,format){return angular.isDefined(date)&&angular.isDefined(format)&&""!==date.trim()?stringToDate(date,format):null},daysInMonth:function(month,year){return angular.isDate(month)?new Date(month.getYear(),month.getMonth()+1,0).getDate():new Date(year,month,0).getDate()},daysInMonthNodays:function(month,year){return new Date(year,month,0).getDate()},format:function(date,format){return dateFormat(date,format,null,nl)},formatDate:function(date,format){return dateFormat(date,format,null,nl)},getShortDays:function(lang){switch(lang!==angular.isDefined(lang)&&(lang="nl"),lang.toLowerCase()){case"nl":return nl.SHORTDAY}},getShortMonths:function(lang){switch(lang!==angular.isDefined(lang)&&(lang="nl"),lang.toLowerCase()){case"nl":return nl.SHORTMONTH}},getDays:function(lang){switch(lang!==angular.isDefined(lang)&&(lang="nl"),lang.toLowerCase()){case"nl":return nl.DAY}},getMonths:function(lang){switch(lang!==angular.isDefined(lang)&&(lang="nl"),lang.toLowerCase()){case"nl":return nl.MONTH}}}}).factory("safeApply",[function(){return function($scope,fn){var phase=$scope.$root.$$phase;"$apply"===phase||"$digest"===phase?fn&&$scope.$eval(fn):fn?$scope.$apply(fn):$scope.$apply()}}]).factory("calView",["dateCalculator",function(dateCalculator){function isSameDate(a,b){return angular.isDate(a)&&angular.isDate(b)?(a.setHours(0,0,0,0),b.setHours(0,0,0,0),a.getTime()===b.getTime()):!1}function inRange(date,first,last){return angular.isDate(first)&&angular.isDate(last)&&angular.isDate(date)?(date.setHours(0,0,0,0),first.setHours(0,0,0,0),last.setHours(0,0,0,0),date>first&&last>date?!0:!1):!1}function mod(n,m){return(n%m+m)%m}function callCullateData(date){var year=date.getFullYear(),month=date.getMonth(),firstDayOfMonth=new Date(year,month,1),firstDayOfWeek=new Date(+firstDayOfMonth-864e5*mod(firstDayOfMonth.getDay()-1,7)),offsetDayOfMonth=firstDayOfMonth.getTimezoneOffset(),offsetDayOfweek=firstDayOfWeek.getTimezoneOffset();offsetDayOfMonth!==offsetDayOfweek&&(firstDayOfWeek=new Date(+firstDayOfWeek+6e4*(offsetDayOfweek-offsetDayOfMonth)));var daysToDraw=dateCalculator.daysInMonth(date)+dateCalculator.daysBetween(firstDayOfWeek,firstDayOfMonth);return daysToDraw%7!==0&&(daysToDraw+=7-daysToDraw%7),{days:daysToDraw,firstDay:firstDayOfWeek}}function split(arr,size){for(var arrays=[];arr.length>0;)arrays.push(arr.splice(0,size));return arrays}function daysInRows(date,selectedDate){for(var day,monthCall=callCullateData(date),today=new Date,days=[],i=0;i<monthCall.days;i++){day=new Date(monthCall.firstDay.getFullYear(),monthCall.firstDay.getMonth(),monthCall.firstDay.getDate()+i);var isMuted=!1;day.getMonth()!==date.getMonth()&&(isMuted=!0);var isSelected=!1;angular.isDate(selectedDate)&&(isSelected=selectedDate.toDateString()===day.toDateString()),days.push({date:day,selected:isSelected,isToday:day.toDateString()===today.toDateString(),label:dateCalculator.formatDate(day,"dd"),isMuted:isMuted})}var arrays=split(days,7);return arrays}function monthInRows(date){for(var monthDate,months=[],i=0;12>i;i++)monthDate=new Date(date.getFullYear(),i,1),months.push({date:monthDate,label:dateCalculator.formatDate(monthDate,"mmm")});var arrays=split(months,4);return arrays}function yearInRows(date){for(var yearDate,years=[],i=11;i>-1;i--)yearDate=new Date(date.getFullYear()-i,date.getMonth(),1),years.push({date:yearDate,label:dateCalculator.formatDate(yearDate,"yyyy")});var arrays=split(years,4);return arrays}function createLabels(date,firstRange,lastRange,grayed){var label="",cssClass="";if(null!==label&&angular.isDate(date)){label=date.getDate(),grayed&&(cssClass="btn-grayed"),isSameDate(date,firstRange)||isSameDate(date,lastRange)?cssClass=grayed?"btn-grayed-selected":"btn-primary":inRange(date,firstRange,lastRange)?cssClass=grayed?"btn-grayed-selected":"btn-info":isSameDate(date,new Date)&&(cssClass=grayed?"btn-grayed":"btn-warning");var month=("0"+(date.getMonth()+1)).slice(-2),day=("0"+date.getDate()).slice(-2);return"<td><button ng-click=\"$select('"+date.getFullYear()+"/"+month+"/"+day+'\')" class="'+cssClass+'"><span>'+label+"</span></button></td>"}return"<td></td>"}return{createMonthDays:function(date,firstRange,lastRange,control){for(var label,domElem="",monthCall=callCullateData(date),tr="<tr>",i=0;i<monthCall.days;i++){var day=new Date(monthCall.firstDay.getFullYear(),monthCall.firstDay.getMonth(),monthCall.firstDay.getDate()+i);label=createLabels(null,firstRange,lastRange),"prevMonth"===control?day.getMonth()!==date.getMonth()&&dateCalculator.dateBeforeOther(date,day)&&(label=createLabels(day,firstRange,lastRange,!0)):"nextMonth"===control&&day.getMonth()!==date.getMonth()&&dateCalculator.dateBeforeOther(day,date)&&(label=createLabels(day,firstRange,lastRange,!0)),day.getMonth()===date.getMonth()&&(label=createLabels(day,firstRange,lastRange)),tr+=label,(i+1)%7===0&&(tr+="</tr>",domElem+=tr,tr="<tr>")}return domElem='<tbody id="secondCal">'+domElem+"</tbody>"},daysInRows:function(date,model){return daysInRows(date,model)},monthInRows:function(date){return monthInRows(date)},yearInRows:function(date){return yearInRows(date)}}}]),angular.module("tink.safeApply",[]).factory("safeApply",[function(){return function($scope,fn){var phase=$scope.$root.$$phase;"$apply"===phase||"$digest"===phase?fn&&$scope.$eval(fn):fn?$scope.$apply(fn):$scope.$apply()}}]),angular.module("tink.templates",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title" ng-bind="title" ng-show="title"></h3><div class="popover-content" ng-bind="content"></div></div></div>'),$templateCache.put("templates/tinkDatePicker.html",'<div class="dropdown-menu datepicker" ng-class="\'datepicker-mode-\' + $mode"><table style="table-layout: fixed; height: 100%; width: 100%;"><thead><tr class="text-center"><th><button tabindex="-1" type="button" class="btn pull-left" ng-click="$selectPane(-1)"><i class="fa fa-chevron-left"></i></button></th><th colspan="{{ rows[0].length - 2 }}"><button tabindex="-1" type="button" class="btn btn-default btn-block text-strong"  ng-click="$toggleMode()"><strong style="text-transform: capitalize;" ng-bind="title"></strong></button></th><th><button tabindex="-1" type="button" class="btn pull-right" ng-click="$selectPane(+1)"><i class="fa fa-chevron-right"></i></button></th></tr><tr ng-show="showLabels" class="days" ng-bind-html="labels"></tr></thead><tbody><tr ng-repeat="(i, row) in rows" height="{{ 100 / rows.length }}%"><td class="text-center" ng-repeat="(j, el) in row"><button tabindex="-1" type="button" class="btn btn-default" style="width: 100%" ng-class="{\'btn-primary\': el.selected, \'btn-info btn-today\': el.isToday && !el.selected}" ng-click="$select(el.date)" ng-disabled="el.disabled"><span ng-class="{\'text-muted\': el.muted}" ng-bind="el.label"></span></button></td></tr></tbody></table></div>'),$templateCache.put("templates/tinkDatePickerRange.html",'<div class="datepickerrange"><div class="pull-left datepickerrange-left"><div class="datepickerrange-header-left"><div class="pull-left"><button tabindex="-1" type="button" class="btn pull-left" ng-click="$selectPane(0)"><i class="fa fa-chevron-left"></i></button></div><div class="text-center clearfix"><label ng-bind="firstTitle"></label></div></div><div class="table-responsive"><table ><thead><tr ng-bind-html="dayLabels" ></tr></thead><tbody  id="firstCal" ng-bind-html="firstCal"></tbody></table></div></div><div class="pull-right datepickerrange-right"><div class="datepickerrange-header-right"> <div class="pull-right"><button tabindex="-1" type="button" class="btn pull-left" ng-click="$selectPane(1)"><i class="fa fa-chevron-right"></i></button></div><div class="text-center clearfix"><label ng-bind="lastTitle"></label></div></div><div class="table-responsive"><table><thead><tr class="days" ng-bind-html="dayLabels"></tr></thead><tbody id="secondCal" ng-bind-html="secondCal"></tbody></table></div></div></div>'),$templateCache.put("templates/tinkDatePickerRangeInputs.html",'<div class="tink-datepickerrange-input-fields"><div class="input-group col-sm-6"><input type="text" id="firstDateElem" data-date data-format="00/00/0000" data-placeholder="mm/dd/jjjj" dynamic-name="dynamicName" tink-format-input ng-model="firstDate" valid-name="first"><span class="input-group-addon"><i class="fa fa-calendar"></i></span></div><div class="input-group col-sm-6"><input type="text" id="lastDateElem" data-date data-format="00/00/0000" data-placeholder="mm/dd/jjjj" tink-format-input ctrl-model="dynamicName" valid-name="last"  ng-model="lastDate"><span class="input-group-addon"><i class="fa fa-calendar"></i></span></div></div>'),$templateCache.put("templates/tooltip.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }"><div class="tooltip-arrow"></div><div class="tooltip-inner" ng-bind="content"></div></div>'),$templateCache.put("templates/tinkDatePickerInput.html",'<div class="tink-datepickerrange-input-fields"><div class="input-group"><span class="input-group-addon"><i class="fa fa-calendar"></i></span></div></div>'),$templateCache.put("templates/tinkDatePickerField.html",'<div class="dropdown-menu datepicker" ng-class="\'datepicker-mode-\' + $mode"><table style="table-layout: fixed; height: 100%; width: 100%;"><thead><tr class="text-center"><th><button tabindex="-1" type="button" class="btn pull-left" ng-click="$selectPane(-1)"><i class="fa fa-chevron-left"></i></button></th><th colspan="{{ rows[0].length - 2 }}"><button tabindex="-1" type="button" class="btn btn-default btn-block text-strong"  ng-click="$toggleMode()"><strong style="text-transform: capitalize;" ng-bind="title"></strong></button></th><th><button tabindex="-1" type="button" class="btn pull-right" ng-click="$selectPane(+1)"><i class="fa fa-chevron-right"></i></button></th></tr><tr ng-show="showLabels" class="days" ng-bind-html="labels"></tr></thead><tbody><tr ng-repeat="(i, row) in rows" height="{{ 100 / rows.length }}%"><td class="text-center" ng-repeat="(j, el) in row"><button tabindex="-1" type="button" class="btn btn-default" style="width: 100%" ng-class="{\'btn-primary\': el.selected, \'btn-info btn-today\': el.isToday && !el.selected}" ng-click="$select(el.date)" ng-disabled="el.disabled"><span ng-class="{\'text-muted\': el.muted}" ng-bind="el.label"></span></button></td></tr></tbody></table></div>'),$templateCache.put("templates/tinkAccordionGroup.html",'<section class="accordion-panel"><a href class="accordion-toggle" ng-click="toggleOpen()"><div class="accordion-panel-heading"><i class="fa fa-th-large"></i><h4 class="panel-title"><span>{{heading}}</span></h4></div></a><div class="accordion-panel-body"><div class="accordion-spinner"><i class="fa fa-rotate-right fa-spin"></i></div><div class="accordion-loaded-content" ng-transclude><p>New DOM content comes here</p></div></div></section>')}]);